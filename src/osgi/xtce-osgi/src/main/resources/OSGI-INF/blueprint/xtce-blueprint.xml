<?xml version="1.0" encoding="UTF-8"?>
<blueprint	xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
			xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
			xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0" 			 
			xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd 
								http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0 http://svn.apache.org/repos/asf/aries/trunk/blueprint/blueprint-cm/src/main/resources/org/apache/aries/blueprint/compendium/cm/blueprint-cm-1.1.0.xsd">
 			
 	<!-- MDC config for sift logging -->
 	<bean class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
		<property name="targetClass"> <value>org.slf4j.MDC</value> </property>
		<property name="targetMethod"> <value>put</value> </property>
		<property name="arguments">
			<list>
				<value>Hbird :: Core :: OSGi :: XTCE Space System Model OSGi services</value>
				<value>org.hbird.core.xtce-osgi</value>
			</list>
		</property>
	</bean>
	
	<!-- Xtce Space System model factory declaration using osgi compendium managed properties. -->
 	<bean id="XtceSpaceSystemModelFactory" class="org.hbird.core.xtce.XtceSpaceSystemModelFactory">
 		<cm:managed-properties persistent-id="xtceSpaceSystemModelFactorySerivce"/>
 	</bean>
	
	
	<!--
		Exports the XtceSpaceSystemModelFactory bean as a provides of the SpaceSystemModelFactory service.
		The service is also registered as a DOSGi RESTful web service 
	 -->
	<service id="XtceSpaceSystemModelFactoryService" 
			 interface="org.hbird.core.spacesystemmodel.SpaceSystemModelFactory" 
			 ref="XtceSpaceSystemModelFactory">
		 <service-properties>
		  	<!-- Adds DOSGi remote access to service interface -->
			<entry key="service.exported.interfaces" value="org.hbird.core.spacesystemmodel.SpaceSystemModelFactory"/>
			<entry key="service.exported.configs" value="org.apache.cxf.rs"/>
			<entry key="service.exported.intents" value="HTTP"></entry>
			<entry key="org.apache.cxf.rs.httpservice.context" value="/xtce"/>
			<entry key="org.apache.cxf.rs.databinding" value="aegis"/>
		</service-properties>
	</service>

</blueprint>