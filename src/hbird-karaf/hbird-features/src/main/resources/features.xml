<?xml version="1.0" encoding="UTF-8"?>

<features xmlns="http://karaf.apache.org/xmlns/features/v1.0.0" 
		  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		  xsi:schemaLocation="http://karaf.apache.org/xmlns/features/v1.0.0 http://karaf.apache.org/xmlns/features/v1.0.0"
		  name="Hbird">

     	<repository>mvn:org.apache.camel.karaf/apache-camel/2.10.4/xml/features</repository>
     	
     	<!-- <repository>mvn:org.apache.activemq/activemq-karaf/5.8.0/xml/features</repository> -->
    
		<feature name="hbird-core" description="Hbird core component bundles" version="${version}">
			<bundle start="false">mvn:org.apache.commons/commons-lang3/3.1</bundle>
			<bundle start="false">mvn:org.apache.oro/com.springsource.org.apache.oro/2.0.8</bundle>
			<bundle start="false">mvn:joda-time/joda-time/2.1</bundle>
			<bundle start="false">mvn:com.googlecode.guava-osgi/guava-osgi/11.0.0</bundle>
			<bundle start="false">mvn:org.hbird.core/commons/0.0.1-SNAPSHOT</bundle>
			<bundle start="false">mvn:org.hbird.core/space-system-model/0.0.1-SNAPSHOT</bundle>
			<feature version="${camel.version}">camel-blueprint</feature>
			<feature version="${camel.version}">camel-spring</feature>
			<!-- <feature version="${camel.version}">camel-jms</feature> -->
			<feature version="${camel.version}">camel-stream</feature>
			<feature version="${camel.version}">camel-mina2</feature>
			<feature version="${camel.version}">camel-netty</feature>
			<feature version="${camel.version}">camel-mongodb</feature>
			<!-- <feature>activemq-broker</feature> -->
		</feature>
		
		<feature name="hbird-xtce" description="Hbird xtce space system bundles including OSGi service provision" version="${version}">
			<feature>hbird-core</feature>
			<bundle start="false">mvn:org.hbird.core/xtce/0.0.1-SNAPSHOT</bundle>
			<bundle>mvn:org.hbird.osgi/xtce-osgi/0.0.1-SNAPSHOT</bundle>
		</feature>
		
		<feature name="hbird-publisher" 
				 description="Hbird space system publisher bundles including OSGi service provision" 
				 version="${version}">
			<feature>hbird-core</feature>
			<bundle start="false">mvn:org.hbird.core/space-system-publisher/0.0.1-SNAPSHOT</bundle>
			<bundle>mvn:org.hbird.osgi/space-system-publisher-osgi/0.0.1-SNAPSHOT</bundle>
		</feature>
		
		<feature name="hbird-transport" description="Hbird transport bundles and services" version="${version}">
			<feature version="${version}">hbird-core</feature>
			<bundle>mvn:org.objenesis/objenesis/1.2</bundle>
			<bundle>mvn:org.hbird.transport/payload-codec/0.0.1-SNAPSHOT</bundle>
			<bundle>mvn:org.hbird.transport/protocols/0.0.1-SNAPSHOT</bundle>
			<bundle start="false">mvn:org.hbird.osgi/rxtx-native-fragment/0.0.1-SNAPSHOT</bundle>
		</feature>
		
		<feature name="hbird-commanding" description="Hbird commmanding application server" version="${version}">
			<feature>hbird-publisher</feature>
			<bundle start="false">mvn:org.hbird.application/commanding/0.0.1-SNAPSHOT</bundle>
<!-- 			<bundle start="false">mvn:org.hbird.osgi/commanding-osgi</bundle> -->
		</feature>
		
		<feature name="hbird-enterprise-osgi" description="Enterprise OSGi bundles for spec 4.2.0">
			<bundle>mvn:org.osgi/org.osgi.compendium/4.2.0</bundle>
			<bundle>mvn:org.osgi/org.osgi.enterprise/4.2.0</bundle>
		</feature>
		
		<feature name="hbird-dosgi-cxf" description="Hbird DOSGi feature using CXF since they don't have one yet :)">
			<feature>cxf-databinding-aegis</feature>
			<feature>cxf-ws-policy</feature>
			<feature>hbird-enterprise-osgi</feature>
			<bundle>mvn:org.jdom/com.springsource.org.jdom/1.1.0</bundle>
			<bundle start="false">mvn:org.apache.commons/com.springsource.org.apache.commons.lang/2.6.0</bundle>
			<bundle>mvn:org.apache.cxf.dosgi/cxf-dosgi-ri-discovery-local/1.3.1</bundle>
			<bundle>mvn:org.apache.cxf.dosgi/cxf-dosgi-ri-dsw-cxf/1.3.1</bundle>
			<bundle>mvn:org.apache.cxf.dosgi/cxf-dosgi-ri-topology-manager/1.3.1</bundle>
		</feature>
	
		<feature name="hbird-dosgi-cxf-14snap" 
				 description="Hbird DOSGi feature using CXF since they don't have one yet :)" 
				 version="1.4-SNAPSHOT">
			<feature>cxf-databinding-aegis</feature>
			<feature>cxf-ws-policy</feature>
			<feature>hbird-enterprise-osgi</feature>
			<bundle>mvn:org.jdom/com.springsource.org.jdom/1.1.0</bundle>
			<bundle start="false">mvn:org.apache.commons/com.springsource.org.apache.commons.lang/2.6.0</bundle>
			<bundle>mvn:org.apache.cxf.dosgi/cxf-dosgi-ri-discovery-local</bundle>
			<bundle>mvn:org.apache.cxf.dosgi/cxf-dosgi-ri-dsw-cxf</bundle>
			<bundle>mvn:org.apache.cxf.dosgi/cxf-dosgi-ri-topology-manager</bundle>
		</feature>
		
		<feature name="hbird-jackson"
				 description="Jackson JSON framework - only to be imported by hbird-jersey, not to be installed standalone!"
				 version="1.9.9">
				 <!-- FIXME this requires javax.ws.rs to install from a clean Karaf. It can only be installed through hbird-jersey -->
			<bundle>mvn:org.codehaus.jackson/jackson-core-asl/1.9.9</bundle>
			<bundle>mvn:org.codehaus.jackson/jackson-mapper-asl/1.9.9</bundle>
			<bundle>mvn:org.codehaus.jackson/jackson-jaxrs/1.9.9</bundle>
			<bundle>mvn:org.codehaus.jackson/jackson-xc/1.9.9</bundle>
		</feature>
		
		<feature name="hbird-jersey" 
				 description="Jersey for OSGi including dependencies" 
				 version="1.14">
			<feature>war</feature>
			<feature>xml-specs-api</feature>
 			<bundle dependency="true">mvn:org.springframework/spring-core/3.0.7.RELEASE</bundle>
			<bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.aopalliance/1.0_6</bundle>
			<bundle dependency="true">mvn:org.springframework/spring-aop/3.0.7.RELEASE</bundle>
			<bundle dependency="true">mvn:org.springframework/spring-beans/3.0.7.RELEASE</bundle>
			<bundle dependency="true">mvn:org.springframework/spring-context/3.0.7.RELEASE</bundle>
			<bundle dependency="true">mvn:org.springframework/spring-web/3.0.7.RELEASE</bundle>
			<bundle dependency="true">mvn:org.codehaus.jettison/jettison/1.1</bundle>
			<bundle dependency="true">mvn:org.apache.felix/org.apache.felix.eventadmin/1.2.8</bundle>
			<bundle>mvn:com.sun.jersey/jersey-core/1.14</bundle>
			<bundle>mvn:com.sun.jersey/jersey-server/1.14</bundle>
			<bundle>mvn:com.sun.jersey/jersey-servlet/1.14</bundle>
			<feature>hbird-jackson</feature>
			<bundle>mvn:com.sun.jersey/jersey-json/1.14</bundle>
			<bundle>mvn:com.sun.jersey.contribs/jersey-spring/1.14</bundle>
		</feature>
		
		<feature name="hbird-halcyon" description="Hbird Web services backend" version="${version}">
			<feature>hbird-jersey</feature>
			<feature>hbird-commanding</feature>
			<bundle start="false">mvn:com.googlecode.json-simple/json-simple/1.1.1</bundle>
			<bundle start="false">mvn:org.jboss.javassist/com.springsource.javassist/3.15.0.GA</bundle>
			<bundle start="false">mvn:org.msgpack/msgpack/0.6.6</bundle>
			<bundle>mvn:org.hbird.application/halcyon/0.0.1-SNAPSHOT/war</bundle>
		</feature>
		
		<feature name="hbird-web-client" description="Web gui" version="${version}">
			<feature>hbird-halcyon</feature>
			<bundle>mvn:org.hbird.application/web-client/0.0.1-SNAPSHOT/war</bundle>
		</feature>
		
		<feature name="hbird-rotor-simulator" description="" version="${version}">
			<feature>hbird-core</feature>
			<feature>hbird-publisher</feature>
			<feature version="${camel.version}">camel-blueprint</feature>
			<bundle start="false">mvn:org.hbird/rotor/0.0.1-SNAPSHOT</bundle>
		</feature>
		
		<feature name="hbird-parameter-archive" 
				 description="Hbird framework bundles for parameter archiving. Included provided implementations for mongoDb"
				 version="${version}">
				 <feature>hbird-core</feature>
				 <bundle start="false">mvn:org.hbird.application/parameter-archive/0.0.1-SNAPSHOT</bundle>
				 <bundle start="false">mvn:org.hbird.application/parameter-cache/0.0.1-SNAPSHOT</bundle>
		</feature>
		
		<feature name="hbird-complete" 
				 description="A complete single container installation of hbird and core applications. NOTE: Model and publisher bundles contain blueprints which wire up their services" 
				 version="${version}">
			<feature>hbird-jersey</feature>
			<feature>hbird-core</feature>
			<feature>hbird-xtce</feature>
			<feature>hbird-publisher</feature>
			<feature>hbird-transport</feature>
			<feature>hbird-commanding</feature>
			<feature>hbird-parameter-archive</feature>
			<feature>hbird-halcyon</feature>
			<feature>hbird-web-client</feature>
		</feature>
		
</features>
