<?xml version="1.0" encoding="UTF-8"?>

<features xmlns="http://karaf.apache.org/xmlns/features/v1.0.0" 
		  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		  xsi:schemaLocation="http://karaf.apache.org/xmlns/features/v1.0.0 http://karaf.apache.org/xmlns/features/v1.0.0"
		  name="Hbird">

     	<repository>mvn:org.apache.camel.karaf/apache-camel/${camel.version}/xml/features</repository>
     	
     	<!-- <repository>mvn:org.apache.activemq/activemq-karaf/5.8.0/xml/features</repository> -->
    
		<feature name="hbird-core" description="Hbird core component bundles" version="${project.version}">
			<bundle dependency="true" start="false">mvn:org.apache.commons/commons-lang3/3.1</bundle>
			<bundle dependency="true" start="false">mvn:commons-lang/commons-lang/2.6</bundle>
			<bundle dependency="true" start="false">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.oro/2.0.8_6</bundle>
			<bundle dependency="true" start="false">mvn:joda-time/joda-time/2.1</bundle>
			<bundle dependency="true" start="false">mvn:com.googlecode.guava-osgi/guava-osgi/11.0.0</bundle>
			<bundle start="false">mvn:org.hbird.core/commons/${project.version}</bundle>
			<bundle start="false">mvn:org.hbird.core/space-system-model/${project.version}</bundle>
			<feature version="${camel.version}">camel-blueprint</feature>
			<feature version="${camel.version}">camel-spring</feature>
			<feature version="${camel.version}">camel-stream</feature>
			<feature version="${camel.version}">camel-mina2</feature>
			<feature version="${camel.version}">camel-netty</feature>
			<feature version="${camel.version}">camel-mongodb</feature>
			<feature version="${spring.version}">spring</feature>
			<feature version="${spring.version}">spring-web</feature>
		</feature>
		
		<feature name="hbird-xtce" description="Hbird xtce space system bundles including OSGi service provision" version="${project.version}">
			<feature>hbird-core</feature>
			<config name="org.hbird.osgi.xtceosgi"></config>
			<bundle start="false">mvn:org.hbird.core/xtce/${project.version}</bundle>
			<bundle>mvn:org.hbird.osgi/xtce-osgi/${project.version}</bundle>
		</feature>
		
		<feature name="hbird-publisher" 
				 description="Hbird space system publisher bundles including OSGi service provision" 
				 version="${project.version}">
			<feature>hbird-core</feature>
			<bundle start="false">mvn:org.hbird.core/space-system-publisher/${project.version}</bundle>
			<bundle>mvn:org.hbird.osgi/space-system-publisher-osgi/${project.version}</bundle>
		</feature>
		
		<feature name="hbird-transport" description="Hbird transport bundles and services" version="${project.version}">
			<feature version="${project.version}">hbird-core</feature>
			<bundle>mvn:org.objenesis/objenesis/1.2</bundle>
			<bundle start="false">mvn:org.hbird.transport/payload-codec/${project.version}</bundle>
			<bundle start="false">mvn:org.hbird.transport/protocols/${project.version}</bundle>
			<bundle start="false">mvn:org.hbird.osgi/rxtx-native-fragment/${project.version}</bundle>
		</feature>
		
		<feature name="hbird-commanding" description="Hbird commmanding application server" version="${project.version}">
			<feature>hbird-publisher</feature>
			<bundle start="false">mvn:org.hbird.application/commanding/${project.version}</bundle>
		</feature>
		
		<feature name="hbird-enterprise-osgi" description="Enterprise OSGi bundles for spec 4.2.0" version="4.2.0">
			<bundle>mvn:org.osgi/org.osgi.compendium/4.2.0</bundle>
			<bundle>mvn:org.osgi/org.osgi.enterprise/4.2.0</bundle>
		</feature>
		
		<feature name="hbird-jackson"
				 description="Jackson JSON framework - only to be imported by hbird-jersey, not to be installed standalone!"
				 version="1.9.9">
				 <!-- FIXME this requires javax.ws.rs to install from a clean Karaf. It can only be installed through hbird-jersey -->
			<bundle>mvn:org.codehaus.jackson/jackson-core-asl/1.9.9</bundle>
			<bundle>mvn:org.codehaus.jackson/jackson-mapper-asl/1.9.9</bundle>
			<bundle>mvn:org.codehaus.jackson/jackson-jaxrs/1.9.9</bundle>
			<bundle>mvn:org.codehaus.jackson/jackson-xc/1.9.9</bundle>
		</feature>
		
		<feature name="hbird-jersey" 
				 description="Jersey for OSGi including dependencies" 
				 version="${jersey.version}">
			<feature>war</feature>
			<feature>xml-specs-api</feature>
			<bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.aopalliance/1.0_6</bundle>
			<bundle dependency="true">mvn:org.codehaus.jettison/jettison/1.1</bundle>
			<bundle dependency="true">mvn:org.apache.felix/org.apache.felix.eventadmin/1.2.8</bundle>
			<bundle>mvn:com.sun.jersey/jersey-core/${jersey.version}</bundle>
			<bundle>mvn:com.sun.jersey/jersey-server/${jersey.version}</bundle>
			<bundle>mvn:com.sun.jersey/jersey-servlet/${jersey.version}</bundle>
			<feature>hbird-jackson</feature>
			<bundle>mvn:com.sun.jersey/jersey-json/${jersey.version}</bundle>
			<bundle>mvn:com.sun.jersey.contribs/jersey-spring/${jersey.version}</bundle>
		</feature>
		
		<feature name="hbird-halcyon" description="Hbird Web services backend" version="${project.version}">
			<feature>hbird-jersey</feature>
			<feature>hbird-commanding</feature>
			<bundle start="false">mvn:org.eclipse.jetty/jetty-websocket/8.1.10.v20130312</bundle>
			<bundle start="false">mvn:com.googlecode.json-simple/json-simple/1.1.1</bundle>
			<bundle>mvn:org.hbird.application/halcyon/${project.version}/war</bundle>
		</feature>
		
		<feature name="hbird-web-client" description="Web gui" version="${project.version}">
			<feature>hbird-halcyon</feature>
			<bundle>mvn:org.hbird.application/web-client/${project.version}/war</bundle>
		</feature>
		
		<feature name="hbird-rotor-simulator" description="" version="${project.version}">
			<feature>hbird-core</feature>
			<feature>hbird-publisher</feature>
			<feature version="${camel.version}">camel-blueprint</feature>
			<bundle start="false">mvn:org.hbird/rotor/${project.version}</bundle>
		</feature>
		
		<feature name="hbird-parameter-archive" 
				 description="Hbird framework bundles for parameter archiving. Included provided implementations for mongoDb"
				 version="${project.version}">
				 <feature version="${project.version}">hbird-core</feature>
				 <bundle start="false">mvn:org.hbird.application/parameter-archive/${project.version}</bundle>
				 <bundle start="false">mvn:org.hbird.application/parameter-cache/${project.version}</bundle>
		</feature>
		
		<feature name="hbird-complete" 
				 description="A complete single container installation of hbird and core applications. NOTE: Model and publisher bundles contain blueprints which wire up their services" 
				 version="${project.version}">
			<feature>hbird-jersey</feature>
			<feature>hbird-core</feature>
			<feature>hbird-xtce</feature>
			<feature>hbird-publisher</feature>
			<feature>hbird-transport</feature>
			<feature>hbird-commanding</feature>
			<feature>hbird-parameter-archive</feature>
			<feature>hbird-halcyon</feature>
			<feature>hbird-web-client</feature>
		</feature>
		
</features>
